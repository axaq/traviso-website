<!DOCTYPE html>

<html>
  <head>
     <meta http-equiv="content-type" content="text/html; charset=utf-8" />
     <title>
       
         Data File Structure //
       
       TRAVISO Blog
     </title>
     <meta name="author" content="Hakan Karlidag" />
     
       <meta namne="description" content="A detailed explanation of the data file's structure." />
     
     <link href="http://feeds2.feedburner.com/axaq" rel="alternate" title="Hakan Karlidag" type="application/atom+xml" />

     <link rel="stylesheet" href="/blog/stylesheets/syntax.css" type="text/css" />
     <link rel="stylesheet" href="/blog/stylesheets/default.css" type="text/css" />

     
  </head>
  <body>
    <a href="http://github.com/axaq"><img style="position: absolute; top: 0; left: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png" alt="Fork me on GitHub" /></a>

    <div id="site">
      <a id="subscribe" href="http://feeds2.feedburner.com/axaq"><img src="/blog/images/rss.png" alt="Subscribe to RSS Feed" /></a>

      <div id="search_area" style="display: none">
        <label for="search" style="display: none">Search</label>
        <img src="http://www.famfamfam.com/lab/icons/silk/icons/cancel.png" alt="X"/>
        <input id="search" />
      </div>

      <h1><a href="/blog">Welcome to traviso.js blog</a></h1>

      <div class="clear"></div>

      <div id="sidebar" class="vcard">
        <h3>Me</h3>
        <dl id="contact">
          <dt>Name</dt>
          <dd><a class="fn url" href="http://twitter.com/axaq">Hakan Karlidag</a> / <span class="nickname">axaq</span></dd>

          <dt>Email</dt>
          <dd class="email"><a href="mailto:karlidag@gmail.com">karlidag@gmail.com</a></dd>
        </dl>
        <h3>And then some</h3>
        <ul id="profiles">
          <li><a href="http://twitter.com/axaq">Twitter</a></li>

          <li><a href="http://github.com/axaq">GitHub</a></li>
        </ul>

         <div class="adr">
          <span class="locality">Indianapolis</span>
          <span class="region">IN</span>
          <span class="postal-code">46220</span>

          <span class="country-name">USA</span>

         </div>
      </div>

      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/prototype/1.6/prototype.js"></script>

      <div id="content">
        <div id="post">
  <div class="date">15 Mar 2015</div>
  <h2>Data File Structure</h2>
  <p>Data file is a simple <span class="caps">XML</span> file which defines what goes where inside the engine.</p>
<p>Here is an example:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span>
<span class="nt">&lt;map_data&gt;</span>
	<span class="nt">&lt;tiles&gt;</span>
		<span class="nt">&lt;tile</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">movable=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>t_1.png<span class="nt">&lt;/tile&gt;</span>
	<span class="nt">&lt;/tiles&gt;</span>
	<span class="nt">&lt;objects&gt;</span>
	    <span class="nt">&lt;object</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">movable=</span><span class="s">&quot;0&quot;</span> <span class="na">interactive=</span><span class="s">&quot;0&quot;</span> <span class="na">s=</span><span class="s">&quot;1x1&quot;</span><span class="nt">&gt;</span>
			<span class="nt">&lt;v</span> <span class="na">id=</span><span class="s">&quot;idle&quot;</span><span class="nt">&gt;</span>
				<span class="nt">&lt;f&gt;</span>o_1.png<span class="nt">&lt;/f&gt;</span>
			<span class="nt">&lt;/v&gt;</span>
		<span class="nt">&lt;/object&gt;</span>
	<span class="nt">&lt;/objects&gt;</span>
	<span class="nt">&lt;ground_map&gt;</span>
		<span class="nt">&lt;row&gt;</span>1 ,1 ,1 ,1<span class="nt">&lt;/row&gt;</span>
		<span class="nt">&lt;row&gt;</span>1 ,0 ,0 ,1<span class="nt">&lt;/row&gt;</span>
		<span class="nt">&lt;row&gt;</span>1 ,0 ,0 ,1<span class="nt">&lt;/row&gt;</span>
		<span class="nt">&lt;row&gt;</span>1 ,1 ,1 ,1<span class="nt">&lt;/row&gt;</span>
	<span class="nt">&lt;/ground_map&gt;</span>
	<span class="nt">&lt;object_map&gt;</span>
		<span class="nt">&lt;row&gt;</span>0 ,0 ,0 ,0<span class="nt">&lt;/row&gt;</span>
		<span class="nt">&lt;row&gt;</span>0 ,1 ,0 ,0<span class="nt">&lt;/row&gt;</span>
		<span class="nt">&lt;row&gt;</span>0 ,0 ,1 ,0<span class="nt">&lt;/row&gt;</span>
		<span class="nt">&lt;row&gt;</span>0 ,0 ,0 ,0<span class="nt">&lt;/row&gt;</span>
	<span class="nt">&lt;/object_map&gt;</span>
<span class="nt">&lt;map_data&gt;</span></code></pre></div><p>So let&#8217;s go step by step.</p>
<h4>Tiles</h4>
<p>&lt;tiles&gt; tag defines the available tiles that you can use in your map.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;tiles&gt;</span>
	<span class="nt">&lt;tile</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">movable=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>images/grassTile.png<span class="nt">&lt;/tile&gt;</span>
	<span class="nt">&lt;tile</span> <span class="na">id=</span><span class="s">&quot;2&quot;</span> <span class="na">movable=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>images/waterTile.png<span class="nt">&lt;/tile&gt;</span>
<span class="nt">&lt;/tiles&gt;</span></code></pre></div><p>A &lt;tile&gt; tag should include the following attributes:</p>
<p><b>id:</b> (Numbers except 0) This is the key value that you will use to define the type of the tile. These will be used in the ground_map tag. DON&#8217;T use 0 as id since it represents empty tiles in the ground_map.</p>
<p><b>movable:</b> (0/1) This defines weather other characters can move onto this type of tile or not.</p>
<p>A &lt;tile&gt; tag should also include the image path/name as the tag value.</p>
<p><br/>
<h4>Objects</h4></p>
<p>Similarly &#8216;objects&#8217; tag defines the available objects that you can use in your map.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;objects&gt;</span>
    <span class="nt">&lt;object</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">movable=</span><span class="s">&quot;0&quot;</span> <span class="na">interactive=</span><span class="s">&quot;0&quot;</span> <span class="na">s=</span><span class="s">&quot;1x1&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;v</span> <span class="na">id=</span><span class="s">&quot;idle&quot;</span><span class="nt">&gt;</span>
			<span class="nt">&lt;f&gt;</span>boxes.png<span class="nt">&lt;/f&gt;</span>
		<span class="nt">&lt;/v&gt;</span>
	<span class="nt">&lt;/object&gt;</span>
<span class="nt">&lt;/objects&gt;</span></code></pre></div><p>An &#8216;object&#8217; tag should include the following attributes:</p>
<p><b>id:</b> (Numbers except 0) This is the key value that you will use to define the type of the object. These will be used in the object_map tag. DON&#8217;T use 0 as id since it represents no-objects in the object_map.</p>
<p><b>movable:</b> (0/1) This defines weather other characters can move onto a tile that this objects sits on.</p>
<p><b>interactive:</b> (0/1) This specifies weather the user can select/interact with the object. The engine will use the callbacks to inform the developer once the object is selected by the user.</p>
<p><b>s:</b> This specifies the size of the object in the number of rows and colums (rows x colums).</p>
<p>An &#8216;object&#8217; tag should also include AT <span class="caps">LEAST</span> one v tag with id &#8216;idle&#8217;.</p>
<p><b><span class="caps">NOTE</span>:</b> You can define as many visuals (single images or animation sequences) as you want using v tags.</p>
<p>Here is an animation defined for the idle state of an object. You can think of &#8220;f&#8221; tag as a frame for animation. If there is only one &#8216;f&#8217; tag then it is a still image instead of an animation.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;v</span> <span class="na">id=</span><span class="s">&quot;idle&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_stand_1.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_stand_2.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_stand_3.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_stand_4.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_stand_5.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_stand_6.png<span class="nt">&lt;/f&gt;</span>
<span class="nt">&lt;/v&gt;</span></code></pre></div><p>You can create the textures/animations for your object in two ways.</p>
<ol>
  <li>Either using child f tags to specify each frame texture if your image names are not in a numeric order like walk1.png, walk2.png &#8230;</li>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;v</span> <span class="na">id=</span><span class="s">&quot;move_ne&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_move_ne_x.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_move_ne_w.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_move_ne_y.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_move_ne_z.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_move_ne_t.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_move_ne_v.png<span class="nt">&lt;/f&gt;</span>
<span class="nt">&lt;/v&gt;</span></code></pre></div>  <li>Or in a single v tag by providing filename/path prefix and extension.</li>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">&lt;v <span class="nv">id</span><span class="o">=</span><span class="s2">&quot;move_ne&quot;</span> <span class="nv">path</span><span class="o">=</span><span class="s2">&quot;hero_move_ne_&quot;</span> <span class="nv">ext</span><span class="o">=</span><span class="s2">&quot;png&quot;</span> <span class="nv">number_of_frames</span><span class="o">=</span><span class="s2">&quot;6&quot;</span> <span class="nv">start_number</span><span class="o">=</span><span class="s2">&quot;1&quot;</span> /&gt;</code></pre></div></ol>
<p>So, the following two &#8216;v&#8217; tags are interpreted as the same by the engine:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;v</span> <span class="na">id=</span><span class="s">&quot;flip&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_flip_3.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_flip_4.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_flip_5.png<span class="nt">&lt;/f&gt;</span>
    <span class="nt">&lt;f&gt;</span>hero_flip_6.png<span class="nt">&lt;/f&gt;</span>
<span class="nt">&lt;/v&gt;</span>
 
<span class="nt">&lt;v</span> <span class="na">id=</span><span class="s">&quot;flip&quot;</span> <span class="na">path=</span><span class="s">&quot;hero_flip_&quot;</span> <span class="na">ext=</span><span class="s">&quot;png&quot;</span> <span class="na">number_of_frames=</span><span class="s">&quot;4&quot;</span> <span class="na">start_number=</span><span class="s">&quot;3&quot;</span> <span class="nt">/&gt;</span></code></pre></div><p>Here the attributes go as follows:</p>
<p><b>id:</b> Id of the texture or animation. You will use this to change object texture/animation any time.</p>
<p><b>path:</b> Image name/id as it is accessed throughout a cached spritesheet or with a path externally.</p>
<p><b>ext:</b> Image file extension. i.e. png, jpg</p>
<p><b>number_of_frames:</b> Number of frames in an animation. if it is not an animation but a single texture, set it to 1.</p>
<p><b>start_number:</b> Starting number of the image name suffix. This is only used for animations where image names are in a numeric order like walk1.png, walk2.png, walk3.png, walk4.png &#8230;</p>
<p><b><span class="caps">NOTE</span> 1:</b> Following ids are reserved, so for additional custom animations use different ids:</p>
<p>idle_s, idle_sw, idle_w, idle_nw, idle_n, idle_ne, idle_e, idle_se, move_s, move_sw, move_w, move_nw, move_n, move_ne, move_e, move_se</p>
<p><b><span class="caps">NOTE</span> 2:</b> &#8216;f&#8217; tags of a &#8216;v&#8217; tag has priority over attributes defining animation sequences. So if you use both the engine will process only the &#8216;f&#8217; tags.</p>
<p><b><span class="caps">NOTE</span> 3:</b> For an object, at minimum, one &#8216;v&#8217; tag with the id &#8220;idle&#8221; is required. This will also be used as the initial visual (single texture or animation sequence) that will be applied to your object until you change it in your own logic.</p>
<p><br/>
<h4>Ground Map</h4></p>
</div>

<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li><a href="/blog/2015/03/15/basic-isometric-world.html">Basic Isometric World</a></li>
    
      <li><a href="/blog/2013/10/14/selfless-ruby.html">Selfless Ruby</a></li>
    
      <li><a href="/blog/2013/09/09/automatically-generated-maps-with-microformats.html">Automatically Generated Maps with Microformats</a></li>
    
  </ul>
</div>

      </div>

      <div class="clear"></div>

    </div>

    

    <script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	  try {
	  ga('create', 'UA-60720270-1', 'auto');
	  ga('send', 'pageview');
	  } catch(err) {}
	</script>
  </body>
</html>
